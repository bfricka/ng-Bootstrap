/*!
 * Amplify Store - Persistent Client-Side Storage @VERSION
 *
 * Copyright 2012 appendTo LLC. (http://appendto.com/team)
 * Dual licensed under the MIT or GPL licenses.
 * http://appendto.com/open-source-licenses
 *
 * http://amplifyjs.com
 */(function(e,t){function createFromStorageInterface(e,r){i.addType(e,function(s,o,u){var a,f,l,c,h=o,p=(new Date).getTime();if(!s){h={};c=[];l=0;try{s=r.length;while(s=r.key(l++))if(n.test(s)){f=JSON.parse(r.getItem(s));f.expires&&f.expires<=p?c.push(s):h[s.replace(n,"")]=f.data}while(s=c.pop())r.removeItem(s)}catch(d){}return h}s="__amplify__"+s;if(o===t){a=r.getItem(s);f=a?JSON.parse(a):{expires:-1};if(!f.expires||f.expires>p)return f.data;r.removeItem(s)}else if(o===null)r.removeItem(s);else{f=JSON.stringify({data:o,expires:u.expires?p+u.expires:null});try{r.setItem(s,f)}catch(d){i[e]();try{r.setItem(s,f)}catch(d){throw i.error()}}}return h})}var n,r,i=e.store=function(e,t,n){var r=i.type;n&&n.type&&n.type in i.types&&(r=n.type);return i.types[r](e,t,n||{})};i.types={};i.type=null;i.addType=function(e,t){i.type||(i.type=e);i.types[e]=t;i[e]=function(t,n,r){r=r||{};r.type=e;return i(t,n,r)}};i.error=function(){return"amplify.store quota exceeded"};n=/^__amplify__/;for(r in{localStorage:1,sessionStorage:1})try{window[r].setItem("__amplify__","x");window[r].removeItem("__amplify__");createFromStorageInterface(r,window[r])}catch(s){}if(!i.types.localStorage&&window.globalStorage)try{createFromStorageInterface("globalStorage",window.globalStorage[window.location.hostname]);i.type==="sessionStorage"&&(i.type="globalStorage")}catch(s){}(function(){var e,n;if(i.types.localStorage)return;e=document.createElement("div"),n="amplify";e.style.display="none";document.getElementsByTagName("head")[0].appendChild(e);try{e.addBehavior("#default#userdata");e.load(n)}catch(r){e.parentNode.removeChild(e);return}i.addType("userData",function(r,s,o){var u,a,f,l,c,h,p;e.load(n);h=s,p=(new Date).getTime();if(!r){h={};c=[];l=0;while(u=e.XMLDocument.documentElement.attributes[l++]){a=JSON.parse(u.value);a.expires&&a.expires<=p?c.push(u.name):h[u.name]=a.data}while(r=c.pop())e.removeAttribute(r);e.save(n);return h}r=r.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");r=r.replace(/^-/,"_-");if(s===t){u=e.getAttribute(r);a=u?JSON.parse(u):{expires:-1};if(!a.expires||a.expires>p)return a.data;e.removeAttribute(r)}else if(s===null)e.removeAttribute(r);else{f=e.getAttribute(r);a=JSON.stringify({data:s,expires:o.expires?p+o.expires:null});e.setAttribute(r,a)}try{e.save(n)}catch(d){f===null?e.removeAttribute(r):e.setAttribute(r,f);i.userData();try{e.setAttribute(r,a);e.save(n)}catch(d){f===null?e.removeAttribute(r):e.setAttribute(r,f);throw i.error()}}return h})})();(function(){function copy(e){return e===t?t:JSON.parse(JSON.stringify(e))}var e={},n={};i.addType("memory",function(r,i,s){if(!r)return copy(e);if(i===t)return copy(e[r]);if(n[r]){clearTimeout(n[r]);delete n[r]}if(i===null){delete e[r];return null}e[r]=i;s.expires&&(n[r]=setTimeout(function(){delete e[r];delete n[r]},s.expires));return i})})()})(this.amplify=this.amplify||{});